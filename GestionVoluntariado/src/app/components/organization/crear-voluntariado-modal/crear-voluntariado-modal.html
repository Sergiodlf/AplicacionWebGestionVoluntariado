<div class="modal-backdrop-custom">
  <div class="modal-dialog-custom">
    <div class="card border-0 shadow-lg rounded-4 p-4 position-relative modal-card overflow-hidden">


      <!-- Botón cerrar -->
      <button type="button" class="btn-close custom-close shadow-none" aria-label="Close" (click)="onClose()"></button>

      <div class="text-center mb-5 mt-2">
        <h3 class="fw-bold text-custom-blue mb-0">Nuevo Voluntariado</h3>
      </div>

      <form (ngSubmit)="crear()" class="premium-form modal-form-scroll">

        <div class="row g-4 mb-4 px-1">
          <!-- Section: Information General -->
          <div class="col-12">
            <div class="d-flex align-items-center mb-3">
              <div class="section-icon me-3" style="width: 36px; height: 36px; font-size: 1rem;">
                <i class="bi bi-pencil-square"></i>
              </div>
              <h5 class="fw-bold text-custom-blue mb-0">Información General</h5>
            </div>
            <div>
              <div class="row g-3">
                <div class="col-md-12">
                  <label class="premium-label"><i class="bi bi-card-text"></i>Título</label>
                  <input type="text" class="form-control premium-input shadow-none" [(ngModel)]="form.title"
                    name="title" placeholder="Apoyo Escolar, Recogida de Alimentos...">
                </div>
                <div class="col-md-6">
                  <label class="premium-label"><i class="bi bi-building"></i>Organización</label>
                  <select class="form-select premium-input shadow-none" [(ngModel)]="form.selectedCif"
                    name="organizationCif" [disabled]="!!cifOrganization">
                    <option value="">Selecciona Organización...</option>
                    <option *ngFor="let org of availableOrganizations" [value]="org.cif">{{ org.nombre }}</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="premium-label"><i class="bi bi-grid"></i>Sector</label>
                  <select class="form-select premium-input shadow-none" [(ngModel)]="form.sector" name="sector">
                    <option value="">Selecciona Sector...</option>
                    <option>Educación</option>
                    <option>Social</option>
                    <option>Sanitario</option>
                    <option>Medio Ambiente</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Section: Ubicación y Horario -->
          <div class="col-12">
            <div class="d-flex align-items-center mb-3">
              <div class="section-icon me-3" style="width: 36px; height: 36px; font-size: 1rem;">
                <i class="bi bi-geo-alt"></i>
              </div>
              <h5 class="fw-bold text-custom-blue mb-0">Ubicación y Horario</h5>
            </div>
            <div>
              <div class="row g-3">
                <div class="col-md-12">
                  <label class="premium-label"><i class="bi bi-map"></i>Zona / Ciudad</label>
                  <select class="form-select premium-input shadow-none" [(ngModel)]="form.zone" name="zone">
                    <option value="">Selecciona Zona/Ciudad...</option>
                    <option>Pamplona</option>
                    <option>Tudela</option>
                    <option>Estella</option>
                    <option>Remoto / Online</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="premium-label"><i class="bi bi-calendar-event"></i>Fecha Inicio</label>
                  <input type="date" class="form-control premium-input shadow-none" [(ngModel)]="form.startDate"
                    name="startDate">
                </div>
                <div class="col-md-6">
                  <label class="premium-label"><i class="bi bi-calendar-check"></i>Fecha Fin</label>
                  <input type="date" class="form-control premium-input shadow-none" [(ngModel)]="form.endDate"
                    name="endDate">
                </div>
              </div>
            </div>
          </div>

          <!-- Section: Descripción -->
          <div class="col-12">
            <div class="d-flex align-items-center mb-3">
              <div class="section-icon me-3" style="width: 36px; height: 36px; font-size: 1rem;">
                <i class="bi bi-justify-left"></i>
              </div>
              <h5 class="fw-bold text-custom-blue mb-0">Descripción</h5>
            </div>
            <div>
              <textarea class="form-control premium-input shadow-none" rows="3" [(ngModel)]="form.description"
                name="description" placeholder="Describe las tareas y objetivos...">
              </textarea>
            </div>
          </div>

          <!-- Section: Categorías y Requisitos -->
          <div class="col-12">
            <div class="d-flex align-items-center mb-3">
              <div class="section-icon me-3" style="width: 36px; height: 36px; font-size: 1rem;">
                <i class="bi bi-stars"></i>
              </div>
              <h5 class="fw-bold text-custom-blue mb-0">Requisitos y ODS</h5>
            </div>
            <div>
              <div class="row g-2 mb-3">
                <div class="col-9">
                  <select class="form-select premium-input shadow-none" [(ngModel)]="form.selectedSkillId"
                    name="skillId">
                    <option value="">Añadir Habilidad Requerida...</option>
                    <option *ngFor="let h of availableHabilidades" [value]="h.id">{{ h.nombre }}</option>
                  </select>
                </div>
                <div class="col-3">
                  <button type="button"
                    class="btn btn-custom-blue text-white w-100 rounded-3 py-2 d-flex align-items-center justify-content-center"
                    (click)="addSkill()" style="height: 48.4px;">
                    <i class="bi bi-plus-lg fs-5"></i>
                  </button>
                </div>
              </div>
              <div class="row g-2">
                <div class="col-9">
                  <select class="form-select premium-input shadow-none" [(ngModel)]="form.selectedOdsId" name="odsId">
                    <option value="">Vincular con ODS...</option>
                    <option *ngFor="let o of availableOds" [value]="o.id">{{ o.nombre }}</option>
                  </select>
                </div>
                <div class="col-3">
                  <button type="button"
                    class="btn btn-custom-blue text-white w-100 rounded-3 py-2 d-flex align-items-center justify-content-center"
                    (click)="addOds()" style="height: 48.4px;">
                    <i class="bi bi-plus-lg fs-5"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Datos Añadidos Resume -->
          <div class="col-12" *ngIf="form.skills.length > 0 || form.ods.length > 0">
            <div class="added-items-container p-3 border rounded-4 bg-white shadow-sm">
              <div class="d-flex flex-wrap gap-2">
                <span *ngFor="let skill of form.skills"
                  class="badge skill-tag px-3 py-2 rounded-pill fw-normal shadow-xs bg-custom-blue text-white pointer-cursor"
                  (click)="removeSkill(skill)" title="Quitar">
                  {{ skill.nombre }} <i class="bi bi-x ms-1"></i>
                </span>
                <span *ngFor="let od of form.ods"
                  class="badge text-white px-3 py-2 rounded-pill fw-normal shadow-xs pointer-cursor"
                  (click)="removeOds(od)" title="Quitar" [style.background-color]="od.color">
                  {{ od.nombre }} <i class="bi bi-x ms-1"></i>
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="text-center pb-2 mt-2">
          <button type="submit"
            class="btn btn-custom-blue px-5 py-3 rounded-pill fw-bold text-white shadow-lg hover-lift submit-btn">
            <i class="bi bi-send me-2"></i> Publicar Actividad
          </button>
        </div>
      </form>
    </div>
  </div>
</div>