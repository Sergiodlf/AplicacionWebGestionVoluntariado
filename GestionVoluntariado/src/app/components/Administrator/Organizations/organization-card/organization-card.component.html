<div class="card border-0 shadow-sm h-100 rounded-4 p-3">
    <div class="d-flex justify-content-between align-items-start mb-3">
        <div class="d-flex align-items-center">
            <div class="rounded-circle bg-custom-blue text-white d-flex align-items-center justify-content-center me-3"
                style="width: 50px; height: 50px;">
                <i class="bi {{ iconClass }} fs-4"></i>
            </div>
            <div>
                <h5 class="fw-bold text-custom-blue mb-0">{{ organization.nombre }}</h5>
                <small class="text-muted"><i class="bi bi-envelope me-1"></i>{{ organization.email }}</small>
            </div>
        </div>

        @if (organization.estado?.toLowerCase() === 'pendiente') {
        <div class="d-flex gap-2">
            <button class="btn btn-custom-blue text-white btn-sm px-3 rounded-pill d-flex align-items-center"
                (click)="onAcceptClick()">
                <i class="bi bi-check-lg me-1"></i> Aceptar
            </button>
            <button class="btn btn-outline-danger btn-sm px-3 rounded-pill d-flex align-items-center"
                (click)="onRejectClick()">
                <i class="bi bi-x-lg me-1"></i> Rechazar
            </button>
        </div>
        }

        @if (organization.estado?.toLowerCase() !== 'pendiente') {
        @if (organization.estado?.toLowerCase() === 'aprobado') {
        <div
            class="badge bg-success bg-opacity-10 text-success border border-success px-3 py-2 rounded-pill d-flex align-items-center">
            <i class="bi bi-check-circle-fill me-2"></i> Aceptado
        </div>
        } @else {
        <span [ngClass]="{'bg-danger': organization.estado?.toLowerCase() === 'rechazado'}"
            class="badge text-white px-3 py-2 rounded-pill">
            {{ organization.estado }}
        </span>
        }
        }
    </div>

    <div class="mb-2">
        <div class="d-flex align-items-center mb-2">
            <span class="fw-bold text-custom-blue me-2">Sector:</span>
            <span class="text-muted">{{ organization.sector }}</span>
        </div>
        <div class="d-flex align-items-center">
            <span class="fw-bold text-custom-blue me-2">Ubicación:</span>
            <span class="text-muted">{{ organization.localidad }} ({{ organization.direccion }})</span>
        </div>
    </div>

    <div class="mb-3">
        <span class="fw-bold text-custom-blue me-2">Descripción:</span>
        <span class="text-muted small mb-0">{{ organization.descripcion }}</span>
    </div>

    @if (organization.actividades && organization.actividades.length > 0) {
    <div>
        <div class="d-flex align-items-center mb-1">
            <span class="fw-bold text-custom-blue me-2">Voluntariados:</span>
        </div>
        <div class="d-flex gap-1 flex-wrap">
            @for (actividad of organization.actividades; track actividad.nombre) {
            <span class="badge bg-light text-custom-blue border" style="cursor: pointer; transition: all 0.2s;"
                (click)="onActivityClick.emit(actividad)" onmouseover="this.classList.add('bg-white', 'shadow-sm')"
                onmouseout="this.classList.remove('bg-white', 'shadow-sm')">
                {{ actividad.nombre }}
            </span>
            }
            @empty {
            }
        </div>
    </div>
    }
</div>